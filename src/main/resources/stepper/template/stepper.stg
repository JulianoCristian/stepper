
stepperShell(program) ::= <<
{
    "StartAt": "<program.firstStateName>",
    "States": {
        <constructDefinition(rest(program.states), first(program.states))>
    }
}
>>

constructDefinition(states, current) ::= <<
    <if(current)>
        <current.jsonRepresentation>
    <endif>
    <if(states)>
    , <constructDefinition(rest(states), first(states))>
    <endif>
>>
